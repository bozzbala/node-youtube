<!DOCTYPE html>
<html lang="en">
<%- include('./partials/head.ejs'); %>
<body>
    <%- include('./partials/nav.ejs'); %>
    <main>
        <div class="example">
            <div class="title-content">
                <h2><%= post.title %></h2>
                <div class="title-btn">
                    <a href="/edit/<%=post.id%>">
                        <i class="fa-solid fa-pen"></i>
                    </a>
                    <button data-id="<%= post.id %>">
                        <i class="fa-solid fa-trash-can" data-id="<%= post.id %>"></i>
                    </button>
                </div>
            </div>
            <p><%= post.text %></p>
            <div class="info">
                <span><%= post.createdAt.toLocaleDateString() %></span>
                <span><%= post.author%></span>
            </div>
            <div><%= post.id%></div>
        </div>
    </main>
    <script>
        document.addEventListener('click', (e) =>{
            const id = e.target?.dataset?.id || null;
            if(id){
                fetch(`/posts/${id}`, {
                    method: "DELETE",
                }).then(()=>{
                    window.location.href("/posts");
                });
            }
        })
    </script>
</body>
</html>